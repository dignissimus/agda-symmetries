\section{Universal Algebra}
\label{sec:universal-algebra}

We first develop some basic notions from universal algebra and equational
logic~\cite{birkhoffStructureAbstractAlgebras1935}.
%
Universal algebra is the abstract study of algebraic structures, which have (algebraic) operations and (universal)
equations.
%
This gives us some vocabulary and a framework to express our results in.
%
The point of view we take is the standard category-theoretic approach to universal algebra, which predates the Lawvere
theory or abstract clone point of view.
%
We keep a running example of monoids in mind, while explaining and defining the abstract concepts.
% In the language of universal algebra, such a structure is formalized by giving a signature of operations, and a
% structure being a carrier set with functions that interpret these operations. We describe such a framework for universal
% algebra in HoTT, as follows.

\subsection{Algebras}
\label{sec:universal-algebra:algebras}

\begin{definition}[Signature]
    A signature, denoted $\sig$, is a (dependent) pair consisting of:
    \begin{itemize}
        \item a set of operations, $\op : \Set$,
        \item an arity function for each symbol, $\ar : \op \to \Set$.
    \end{itemize}
\end{definition}

\begin{example}
    A monoid is a set with an identity element (or a nullary operation), and a binary multiplication operation.
    %
    The signature for monoids $\sigMon$ is encoded as:
    $(\Fin[2],\lambda \{0 \mapsto \Fin[0] ; 1 \mapsto \Fin[2] \})$.
    %
    Informally, the set of operations is the two-element set $\{e,\mult\}$, which is written as $\Fin[2]$,
    and the arity function picks out a (finite) set denoting the (finite) arity of each operation.
    %
    Of course, this is an example of a finitary signature,
    but in general the arity function can be any (not necessarily finite) set.
\end{example}

Every signature $\sig$ induces a signature functor on $\Set$, written $\Sig$.

\begin{definition}[Signature functor]
    \begin{align*}
        \Sig \colon \Set & \to \Set                         \\
        X                & \mapsto \dsum{o:\op}{X^{\ar(o)}} \\
        X \xto{f} Y      & \mapsto
        \dsum{o:\op}{X^{\ar(o)}}
        \xto{(o, \blank \comp f)}
        \dsum{o:\op}{Y^{\ar(o)}}
    \end{align*}
\end{definition}

\begin{example}
    The signature functor for monoids, $\SigMon$, assigns to a carrier set $X$,
    the sets of inputs for each operation.
    %
    Expanding the dependent product on $\Fin[2]$, we obtain a coproduct or disjoint union of sets:
    $\SigMon(X) \eqv X^{\Fin[0]} + X^{\Fin[2]} \eqv \unitt + (X \times X)$.
\end{example}

A $\sig$-structure is given by a carrier set, with functions interpreting each operation symbol.
%
The signature functor applied to a carrier set gives the inputs to each operation, and the output is simply a map back
to the carrier set.
%
Formally, these two pieces of data are an algebra for the $\Sig$ functor.
%
We write $\str{X}$ for a $\sig$-structure with carrier set $X$, following the model-theoretic notational convention.

\begin{definition}[Structure]
    A $\sig$-structure $\str{X}$ is an $\Sig$-algebra, that is, a pair consisting of:
    \begin{itemize}
        \item a carrier set $X$, and
        \item an algebra map $\alpha_{X}\colon \Sig(X) \to X$.
    \end{itemize}
\end{definition}

\begin{example}
    Concretely, an $\SigMon$-algebra has the type
    \[
        \alpha_{X} : \SigMon(X) \to X \eqv \unitt + (X \times X) \to X \eqv (\unitt \to X) \times (X \times X \to X)
    \]
    which is the pair of functions interpreting the two operations.
    The natural numbers with the carrier set $\Nat$,
    and the constant $0$ and the addition operation $+$ give an example of such a structure.
    %
    Similarly, with the constant $1$ and the multiplication operation $\times$, we have another monoid structure.
\end{example}

One of the advantages of an abstract framework is that we can readily leverage existing abstract machinery.
%
The notion of a homomorphism between two $\sig$-structures is a standard concept --
in the categorical framework, this is simply a map between the two $\Sig$-algebras.

\begin{definition}[Homomorphism]
    A homomorphism between two $\sig$-structures $\str{X}$ and $\str{Y}$ is a morphism of $\Sig$-algebras,
    that is, a map $f : X \to Y$ such that the following diagram commutes:
    \[
        \begin{tikzcd}
            \Sig(X) \arrow[r, "\alpha_{X}"] \arrow[d, "\Sig(f)"']
            & X \arrow[d, "f"] \\
            \Sig(Y) \arrow[r, "\alpha_{Y}"']
            & Y
        \end{tikzcd}
    \]
\end{definition}

\begin{example}
    To see concretely that this definition captures the notion of a homomorphism between two monoids ($\Sig$-algebras)
    $\str{X}$ and $\str{Y}$, we note that the top half of the diagram produces the map:
    $\unitt + (X \times X) \xto{\alpha_{X}} X \xto{f} Y$, which applies $f$ to the output of each operation,
    and the bottom half of the diagram produces the map:
    $\unitt + (X \times X) \xto{\SigMon(f)} \unitt + (Y \times Y) \xto{\alpha_{Y}} Y$,
    and the commutativity of the diagram says that these two maps are equal.
    %
    In other words, a homomorphism between $X$ and $Y$ is a map $f$ on the carrier sets that commutes with the
    interpretation of the monoid operations, or simply, preserves the monoid structure.
\end{example}

For a fixed signature $\sig$,
the category of $\Sig$-algebras and their morphisms form a category of algebras,
written $\SigAlg$, or simply, $\sigAlg$,
given by the obvious definitions of identity and composition of the underlying functions.

\subsection{Free Algebras}
\label{sec:universal-algebra:free-algebras}

The category $\sigAlg$ is a category of structured sets and structure-preserving maps,
which is an example of a concrete category, that admits a forgetful functor to $U : \sigAlg \to \Set$,
which forgets the structure and retains only the carrier set.
%
Note that in our notation, $U(\str{X})$ is simply $X$, a fact that we can exploit to simplify our notation.
%
The natural question to ask is whether this forgetful functor has a left adjoint, and further, if it is monadic.

This is the construction of the free $\sig$-algebra on a set, which is a standard construction in universal algebra,
known as the term algebra (or the absolutely free algebra without equations).
%
Rather than defining the left adjoint directly, we rephrase the universal property of free algebras in more concrete
terms.

\begin{definition}[Free Algebras]
    A free $\sig$-algebra on a set $X$ is a $\sig$-structure $\str{F}(X)$,
    together with a universal map $\eta_X : X \to F(X)$, such that,
    for any $\sig$-algebra $\str{Y}$, the operation (post-composition with $\eta_X$)
    assigning to each homomorphism $f : \str{X} \to \str{Y}$, the function $f \comp \eta_X : X \to Y$,
    is an equivalence.
    \[
        \begin{tikzcd}[ampersand replacement=\&]
            \str{F}(X) \\
            \\
            \str{Y}
            \arrow["f"', dotted, from=1-1, to=3-1]
        \end{tikzcd}
        \mapsto
        % https://q.uiver.app/#q=WzAsMyxbMCwwLCJYIl0sWzIsMCwiRihYKSJdLFsyLDIsIlkiXSxbMCwxLCJcXGV0YV97WH0iLDAseyJjb2xvdXIiOlswLDYwLDYwXX0sWzAsNjAsNjAsMV1dLFswLDIsImYgXFxjb21wIFxcZXRhX3tYfSIsMl0sWzEsMiwiZiIsMCx7InN0eWxlIjp7ImJvZHkiOnsibmFtZSI6ImRvdHRlZCJ9fX1dXQ==
        \begin{tikzcd}[ampersand replacement=\&,cramped]
            X \&\& {F(X)} \\
            \\
            \&\& Y
            \arrow["{\eta_{X}}", color={rgb,255:red,214;green,92;blue,92}, from=1-1, to=1-3]
            \arrow["{f \comp \eta_{X}}"', from=1-1, to=3-3]
            \arrow["f", dotted, from=1-3, to=3-3]
        \end{tikzcd}
    \]
\end{definition}

Concretely, we are asking for a bijection between the set of homomorphisms from the free algebra to any other algebra,
and the set of functions from the carrier set of the free algebra to the carrier set of the other algebra.
%
In other words, there should be no more data in homomorphisms out of the free algebra than there is in functions out of
the carrier set.
%
\vc{Extension operation.}
\vc{Monadicity and functoriality etc.}

In this paper, we are interested in the constructions of free monoids and free commutative monoids.